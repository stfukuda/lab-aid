# 認定テスト作成ガイドライン

## 1．基本仕様

### 1.1 出力形式

- 出力ファイル形式：`Markdown (.md)`  
- 文字コード：**UTF-8（BOMなし）**  
- 改行コード：**LF（Unix形式）**  

#### 補足説明

- 理由：AIおよびスクリプト処理・Git差分管理・Markdown変換時の互換性を維持するため。  
- Windows・macOS・Linuxの全環境で整合性が保たれる。  

#### Markdown構成テンプレート

```markdown
## <セクション名>

### 問題<番号>

<問題文>

- <選択肢1>
- <選択肢2>
- <選択肢3>
- <選択肢4>
```

### 1.2 問題構成ルール

| 要素 | 条件 | 機械検証方法 |
|------|------|---------------|
| 問題数 | 標準30問（24〜36で可変可） | 「### 問題」の出現数をカウントする。 |
| 選択肢数 | 各問4択（最大6択） | 各「### 問題」直下の連続する `-` 行のみを選択肢として検出する。 |
| 選択肢ラベル | 各選択肢の先頭に `[〇]` または `[×]`（全角）を付与する | 各選択肢行の先頭トークンを判定する。 |
| 正答表示 | `[〇]` は各問題でちょうど1件（単一正答） | 各問題で `[〇]` 行が1件であることを確認する。 |

### 1.3 セクション構成と配点（標準）

- セクションA：知識問題 40％（用語・概念・設定意図）
- セクションB：操作シナリオ 40％（画面遷移、状態遷移、入力チェック、丸め・規格判定）
- セクションC：事例判断 20％（ログ読み取り、誤操作是正、権限境界の判断）

### 1.4 合格基準（標準）

- 総合正答率 80％以上。
- 各セクション正答率 60％以上。

### 1.5 受験プラットフォーム（Microsoft Forms）

#### 必須設定

- クイズ形式を使用する（ポイント配点を有効化）。
- 組織のユーザーに限定する、サインインを必須にする。
- 1人1回答を有効化する（重複回答を防止）。
- すべての設問を必須に設定する（未回答を防止）。
- 各設問は単一解答とする（Microsoft Forms の「複数回答を許可」はOFF）。

#### 受付・時間管理

- 受付期間を設定する：フォームの「開始日時」「終了日時」で回答受付を制御する。
- 厳密監督は実施しない前提とし、期間外の回答は無効とする運用とする。
- 回答データには「開始時刻」「完了時刻」が含まれる（Excelエクスポート）。所要時間は差分で算出可能。

#### ランダム化とセクション構成

- 質問の順序シャッフルはフォーム全体単位。セクション順（A→B→C）を固定する場合はオフにする。
- セクション（ページ）をA/B/Cで作成し、各セクション内に該当設問を配置する。

#### 出題プールの運用

- Forms単体では「プールからのランダム抽出」は不可。
- 運用回避策：
  - フォームを複製し、回ごとに設問を差し替えてローテーションする。
  - 受験者グループごとにフォームを分けて配信する（問題セットを変える）。

#### 配点・合否判定

- ポイント配点でA/B/Cの比率（40・40・20）になるよう各設問点を設定する。
- 合否判定はFormsのスコアを用いて集計する（総合80％以上・各セクション60％以上）。必要に応じてExcelで二段階判定を行う。

#### 単一解答の原則

- すべての設問は単一正答とする（複数回答は使用しない）。
- Microsoft Forms では各設問で「複数回答を許可」を使用しない。
- 問題文や見出しに多答表記（例：「【多選】」「（複数選択可）」）は付けない。

#### 公開・記録・保管

- 提出後に正答や点数は表示しない（受験期間終了後に結果通知）。
- 回答はExcelへエクスポートし、リポジトリ/SharePoint等に保管する（開始・完了時刻を含む）。

#### ファイルアップロード（任意）

- 証跡提出が必要な場合のみ使用する。組織内限定フォームで有効化する。
- 個人情報や機密情報のアップロードを禁止し、サイズ/拡張子を制限する。

### 1.6 問題配分目安（標準30問）

- セクションA：12問、セクションB：12問、セクションC：6問。
- 可変時（24〜36問）は A:B:C を 4:4:2 の比率を目安に丸める。

### 1.7 配布モデル（セット方式）

Formsには「プールからのランダム抽出」がないため、標準構成の問題セットを複数用意してローテーション配布する。

#### セット設計の原則

- ブループリント固定：各セットで A/B/C＝12/12/6、トピック配分・難易度（易40％・中40％・難20％）を揃える。
- アンカー問題：各セットに10〜20％の共通問題を配置し、セット間の難易度差をモニタ・補正可能にする。
- 露出対策：セットID（例：SetA/SetB/SetC）を付与し、四半期ごとにローテーション。各サイクルで全体の20％程度を新規差し替え。

#### フォーム運用

- フォームはセットごとに別作成（例：Ops-Lv1-SetA、Ops-L1-SetB、Master-L1-SetA など）。
- 設問・選択肢シャッフルはON、セクション順は固定（A→B→C）。配点はA/B/C＝40/40/20。
- 集計はExcelエクスポートをセット横断で統合し、SetID列で識別する。合否判定（総合80％・各セクション60％）は同一ロジックを適用。

#### 保守・版管理

- 問題ID・セットIDを台帳（CSV）で管理。版情報（v1 など）はフォーム名・manifest 側で管理する。
- アンカー問題は全セットで一貫して更新する（比較性の維持）。
- 命名規則例：Ops-L1-SetA-v1、Master-L2-SetC-v2（Forms名・出力ファイル名に含める）。

#### セット数・初期規模の目安

- セット数：最低3セット、可能なら4〜5セット。
- 初期投入：A12/B12/C6 × 3〜4セット（計90〜120問規模）。

### 1.8 難易度タグ運用と台帳連携（追加）

- 付与対象：難易度タグは「各設問（1問ごと）」に付与する。
- 値の種類：`easy` / `medium` / `hard` の3区分を用いる。
- 目安配分：各セクションで 40％（易）・40％（中）・20％（難）を目安に設計する。
- 記録先：`問題台帳_template.csv` の `difficulty` 列に記録する（Markdown本文には記載しない）。運用時は実体台帳 `問題台帳.csv` を管理対象とする。
- セクション記録：同CSVの `section` 列に A/B/C を記録し、難易度配分の集計単位とする。
- レビュー基準：セット横断で配分が維持されているかをCSVで検証する（アンカー含む）。

補足（セット運用）

- アンカー問題はセット間で同一内容・同一難易度を維持する。
- 差し替え問題は内容に応じて難易度を設定するが、セクション内の配分が崩れないように調整する。

作成・更新フロー（簡易）

1. 問題を作成（Markdown）し、セクション（A/B/C）と正答を確定。
2. 台帳（CSV）に1問ごとの `section` と `difficulty` を記録（ID/セットを併記）。
3. セクション別に 40/40/20 の配分を満たすかをCSV集計で確認（必要なら設問難易度を再調整）。
4. セット間でアンカーの難易度が一貫しているか、差し替えで配分が維持されているかを確認。

## 2．設問構成と対象・状態・操作の明示

### 2.1 三要素ルール（対象・状態・操作）

各問題文は、以下の三要素が**判別可能になるように**記述すること。  
（注記やラベルで「対象:」「状態:」「操作:」と明示する必要はない）

| 要素 | 内容 | 例 | 検出キーワード例 |
|:--|:--|:--|:--|
| 対象 | 操作対象となるマスタ・機能 | 試験項目マスタ、ホルダマスタ | 「マスタ」「機能」「項目」 |
| 状態 | 処理時点の段階・条件 | 承認待ち、試験中、確認待ち | 「待ち」「設定」「中」「確定」 |
| 操作 | 実施処理・設定動作 | 登録、更新、設定、承認、確認、取消、無効化、終了、作成 | 「登録」「更新」「設定」「承認」「確認」「取消」「無効化」「終了」「作成」 |

#### 自動検証条件

- セクションA（知識）
  - 問題文に「マスタ」「機能」「項目」のいずれかを含むこと（対象）。
  - 「定義」「目的」「意味」「意図」などの語を含むことを推奨。
- セクションB/C（操作・事例）
  - 問題文に「マスタ」「機能」「項目」のいずれかを含むこと（対象）。
  - 「〜のとき」「〜した場合」「〜状態」などの時制表現を含むこと（状態）。
  - 「登録」「更新」「設定」「承認」「確認」「取消」「無効化」「終了」「作成」のいずれかを含むこと（操作）。

### 2.2 記述ルール

- 状態依存設問では、Lab-Aid正式コード（例：`O：確認待ち`）を使用する。  
- 操作設問は「機能名＋操作語」の形式（例：「試験機能で承認を行う」）を採用する。  
- 抽象表現（例：「固定小数点表示を選択した場合」）は避け、  
  原則として「どの対象で・どの操作を・どの状態で」を一文に含める。  

### 2.3 カバレッジ指針（例）

- 操作者向け：
  - 状態：`B/E/G/I/L/O/R/U` を最低1回ずつ登場させる。
  - 操作：受付・指図・確認・承認・取消・総合判定・出荷判定・成績書出力のうち、各回で偏りが出ないよう分散。
  - 規格・丸め・異常値（手動・手法）の出題を毎回含める。
- マスタ管理者向け：
  - 基本：サンプルグループ・サンプル・試験項目・ホルダ・プロトコル・文字データ・試薬。
  - 詳細：計算式・規格・サンプル別上書き・定期試験・自動化。
  - 出荷：顧客・顧客サンプル・出荷試験項目・顧客規格・顧客規格文字・報告文字変換。

## 3．表記ルール

### 3.1 文体統一

| 項目 | ルール | 自動検出方法 |
|------|--------|--------------|
| 文末 | 「〜する」「〜である」で統一 | 終止動詞・句点「。」の有無を確認する。 |
| 問題文長 | 80文字以内（操作シナリオは120文字まで可） | 文字数をカウントする。 |
| 選択肢長 | 各60文字以内 | 行単位の文字数をカウントする。 |
| 均等性 | 最短と最長の差 ≤ 10文字 | 各選択肢長を比較する。 |

### 3.2 選択肢構成

- 各選択肢は1行1文で完結する。  
- 各選択肢の先頭に `[〇]` または `[×]`（全角）を必ず付与する。  
- 正解は1問につき1件（単一正答のみ）。  
- 各選択肢の文構造（主語・動詞・終止形）は統一する。  

### 3.3 正解配置ルール

- Markdown では正解（`[〇]`）を先頭に配置する（スクリプトで自動整形）。  
- Microsoft Forms 側で選択肢シャッフルを有効にするため、Markdown 上での位置分散ルールは適用しない。  

## 4．自動検証条件

| チェック項目 | 条件 | 判定基準 |
|---------------|------|-----------|
| 正答数 | `[〇]` が1問あたり1件（単一正答） | OK / NG |
| 均等性 | 各選択肢の文字数差 ≤ 10 | OK / NG |
| 三要素確認 | Aは対象（＋定義/概念）、B/Cは対象・状態・操作を含む | OK / NG |
| 改行形式 | 改行コードがLFで統一されている | OK / NG |
| 出力構造 | Markdownテンプレート構造に準拠 | OK / NG |
| ラベル | 各選択肢の先頭が `[〇]` または `[×]`（全角） | OK / NG |

## 5．良い設問と不適切な設問例

| 区分 | 設問例 | コメント |
|:--|:--|:--|
| ✅ 正 | 「試験項目マスタで編集方法を『固定小数点表示』に設定した場合の動作として正しいものはどれか。」 | 対象・状態・操作明示、文長・配置ルール遵守。 |
| ⚠ 改 | 「『固定小数点表示』を選択した場合の動作として正しいものはどれか。」 | 対象・状態・操作が不明確、抽象的表現。 |

## 6．禁止事項（抜粋）

- 「すべて正しい」「どれでもよい」など、正答を暗示する選択肢。
- 選択肢の言い回し・長さに極端な偏り（ミスリード）。
- 問題文と選択肢の用語不一致（例：状態コードの表記ゆれ）。
- 本番環境のスクリーンショット流用（モザイクなし）。

## 7．改訂運用

1. 問題改訂時は「対象・状態・操作」の三要素検証スクリプトで自動チェックを行う。  
2. 追加時は「文長」「改行形式（LF）」を確認する。  
3. 改訂履歴はGitで管理し、差分比較でルール逸脱を検出する。  
