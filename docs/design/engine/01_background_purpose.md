# 1. 背景・目的（Why）

## 1.1 背景

- 品質情報管理システム「Lab-Aid」の計算式（推定 E / 丸め R）はオンプレ製品に埋め込まれた独自ランタイムによって評価されており、仕様・資産がブラックボックス化していた。
- Excel で管理される試験データを Python 上で再評価したいニーズ（自動判定、シミュレーション、教育用途）が高まったが、既存ランタイムをそのまま利用することはライセンス・運用の観点で難しい。
- 手作業による結果検証は 1 件あたり 30 分以上を要し、誤入力や再計算の手戻りが発生していた。

## 1.2 業務課題

- 確認・検証の負荷  
  Lab-Aid クライアントからのみ検証でき、一度に 1 件しか評価できないため負荷が高い。
- ノウハウの属人化  
  Lab-Aid の記法や丸め仕様を理解しているメンバーしか検証できず、他メンバーがレビューできない。
- 自動テスト不能  
  Lab-Aid クライアントに閉じたランタイムのため、CI や単体テストなど他環境に組み込めず品質保証が困難。

## 1.3 目的

1. Lab-Aid 計算式を Python 上で互換実行できる OSS ランタイムを整備し、第三者でも同じ結果を再現できるようにする。
2. Excel ブックや CLI から計算を自動化し、1 件あたりの評価時間を 30 分 → 数秒へ短縮する。
3. テストコードと設計資料を残し、仕様理解を共有資産にすることで属人化を解消する。
4. 教育・認定制度（認定試験の自動採点）にも再利用できる共通エンジンを提供する。

## 1.4 成果物の範囲

- `src/lab_aid/engine` 配下に計算エンジン本体、入力パーサ、ビルトイン関数群を実装する。
- `docs/design/engine` に第三者が再実装できるレベルの設計書（本ファイルを含む全 9 章構成）を整備する。
- `docs/guidelines` ではエンドユーザー向けの導入 / 運用ガイドを提供し、開発者向け資料と分離する。

## 1.5 想定読者

- Lab-Aid 計算仕様を実装・保守する開発者
- Excel CLI やバッチスクリプトでランタイムを呼び出す業務担当者
- 認定制度の問題作成・検証を担う教育担当者
